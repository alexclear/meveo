<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:hf="http://java.sun.com/jsf/composite/tags"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

    <ui:define name="navigation">
        <ui:include src="/WEB-INF/layoutmenu.xhtml" />
    </ui:define>

    <ui:define name="body">
        <p:panel>
            <h:form id="crumbmenuForm">
                <p:breadCrumb homeDisplay="text" id="crumbmenu">
                    <p:menuitem value="#{messages['menu.admin']}" disabled="true" />
                    <p:menuitem outcome="customFieldTemplates" value="#{messages['menu.customFieldTemplates']}" />
                </p:breadCrumb>
            </h:form>
        </p:panel>
        <hf:formPanel id="formPanel" label="#{messages['customFieldTemplate.panel']}" backingBean="#{customFieldTemplateBean}" showEnableDisableButton="true">
            <hf:formField label="#{messages['BusinessEntity.code']}" field="code" required="true" allowEdit="false" />
            <hf:formField label="#{messages['customFieldTemplate.fieldLabel']}" field="description" required="true" useConverter="false" id="description" maxlength="50" />
            <hf:formField label="#{messages['customFieldTemplate.fieldType']}" field="fieldType" required="true" componentWidth="20"
                listenerUpdate=":formPanel:formId:listValuesField :formPanel:formId:defaultValueField :formPanel:formId:entityClazzField :formPanel:formId:storageTypeField"/>
            <hf:formField label="#{messages['customFieldTemplate.accountType']}" field="accountLevel" required="true"
                listValues="#{customFieldTemplateBean.accountLevelsNoTimer}" componentWidth="20" newLine="true"/>
            <h:panelGroup id="defaultValueField">
                <hf:formField label="#{messages['customFieldTemplate.defaultValue']}" field="defaultValue" maxlength="50" componentWidth="20"
                    rendered="#{customFieldTemplateBean.entity.fieldType != 'DATE' and customFieldTemplateBean.entity.fieldType != 'ENTITY'}" />
            </h:panelGroup>
            <h:panelGroup id="storageTypeField">
            	<hf:formField label="#{messages['customFieldTemplate.storageType']}" field="storageType" required="true"
            		rendered="#{!customFieldTemplateBean.entity.versionable}" listenerUpdate=":formPanel:formId:valueRequiredField"/>
            	<hf:formField label="#{messages['customFieldTemplate.storageType']}" field="storageType" required="true"
            		rendered="#{customFieldTemplateBean.entity.versionable}" listValues="#{customFieldTemplateBean.listEnum}"
            		listenerUpdate=":formPanel:formId:valueRequiredField"/>
            </h:panelGroup>
            <h:panelGroup id="entityClazzField">
            	<hf:formField label="#{messages['entity.notification.classNameFilter']}" field="entityClazz" required="true" size="60" maxlength="255"
					autocompleteMethod="#{customFieldTemplateBean.autocompleteClassNames}" isAutocomplete="true"
					rendered="#{customFieldTemplateBean.entity.fieldType == 'ENTITY'}"/>
			</h:panelGroup>
            <h:panelGroup id="valueRequiredField">
            	<hf:formField label="#{messages['customFieldTemplate.fieldRequired']}" field="valueRequired" isMessage="true" componentWidth="15" 
            		disabled="#{customFieldTemplateBean.entity.storageType!='SINGLE'}" newLine="true"/>
            </h:panelGroup>
            <hf:formField label="#{messages['customFieldTemplate.versionable']}" field="versionable" isMessage="true" allowEdit="true" componentWidth="15" 
            	listenerUpdate=":formPanel:formId:calendar :formPanel:formId:storageTypeField :formPanel:formId:valueRequiredField" />
            <h:panelGroup id="calendar">
                <hf:formField label="#{messages['customFieldTemplate.calendar']}" field="calendar" valueLabelField="code" listBean="#{calendarBean}"
                    rendered="#{customFieldTemplateBean.entity.versionable}" />
            </h:panelGroup>
            <hf:formField label="#{messages['customFieldTemplate.triggerEndPeriodEvent']}" field="triggerEndPeriodEvent" componentWidth="15"/>
            <h:panelGroup id="listValuesField">
                <hf:formField label="#{messages['customFieldTemplate.listValues']}" field="listValues" rendered="#{customFieldTemplateBean.entity.fieldType == 'LIST'}"
                    mapKeyLabel="#{messages['commons.value']}" mapValueLabel="#{messages['commons.label']}" componentWidth="75" newLine="true" />
            </h:panelGroup>
            <hf:formField label="#{messages['enableEntity.disabled']}" doNotShowOnNew="true" allowEdit="false" field="disabled" isMessage="true" newLine="true" />
        </hf:formPanel>

    </ui:define>

</ui:composition>