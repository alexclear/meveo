<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:e="http://primefaces.org/extension"
	template="/WEB-INF/template.xhtml">
	
    <ui:define name="metadata">
		<f:metadata>
		<f:viewParam name="accessId"
				value="#{accessBean.objectId}" /> 
		</f:metadata>
	</ui:define>
	
	<ui:define name="navigation">
		<ui:include src="/WEB-INF/layoutmenu.xhtml" />
	</ui:define>

	<ui:define name="body">
		<p:panel>
			<h:form id="crumbmenuForm">
				<p:breadCrumb homeDisplay="text" id="crumbmenu">
					<p:menuitem value="#{messages['menu.crm']}" disabled="true" />
					<p:menuitem outcome="access"
						value="#{messages['menu.accessPoints']}" />
				</p:breadCrumb>
			</h:form>
		</p:panel>

		<hftl:entityPopup id="searchSubscriptionPopup"
			header="#{messages['access.subscription']}"
			updateField=":#{p:component('subscriptionId')}"
			selection="#{accessBean.entity.subscription}"
			backingBean="#{subscriptionBean}"
			searchField1Label="#{messages['subscription.code']}"
			searchField1="code" column1Label="#{messages['subscription.code']}"
			column1="code" column2Label="#{messages['subscription.description']}"
			column2="description">
		</hftl:entityPopup>
		
		
		<h:panelGroup styleClass="col2-set">
            <h:panelGroup styleClass="col1">
					<hf:hierarchyPanel
						treeValue="#{customerTreeBean.buildAccountsHierarchy(accessBean.entity)}"
						entity="#{accessBean.entity}" />
            </h:panelGroup>
		<h:panelGroup styleClass="col2">
			<hf:formPanel id="formPanel" backingBean="#{accessBean}" label="#{messages['access.accessPanel']}" showEnableDisableButton="true" ajaxSubmit="true" submitPartialProcess=":formPanel:formId:tabView">
				<p:tabView id="tabView">
					<p:tab title="#{messages['customer.tab.information']}">
							<hf:formField label="#{messages['access.accessUserId']}"
								field="accessUserId" required="true" />
							<hf:formField id="subscriptionId"
								label="#{messages['access.subscription']}" field="subscription"
								valueLabelField="code" popup="true" popupId="searchSubscriptionPopup"
								required="true" />
							<hf:formField label="#{messages['access.startDate']}"
								field="startDate" />
							<hf:formField label="#{messages['access.endDate']}"
								field="endDate" />
							<hf:formField label="#{messages['enableEntity.disabled']}" allowEdit="false" doNotShowOnNew="true"
								field="disabled" isMessage="true"/>
					     </p:tab>
					<p:tab title="#{messages['customFieldTemplate.cfValues']}">
						<hf:customFields id="customFields" backingBean="#{accessBean}" messagesId=":formPanel:formId:messages"/>
					</p:tab>
				</p:tabView>
			</hf:formPanel>
			</h:panelGroup >
              </h:panelGroup>

	</ui:define>

</ui:composition>
