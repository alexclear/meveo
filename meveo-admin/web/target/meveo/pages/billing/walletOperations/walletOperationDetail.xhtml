<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	xmlns:p="http://primefaces.org/ui"
	template="/layout/template.xhtml">

	<ui:define name="navigation">
		<ui:include src="/layout/navigation.xhtml" />
	</ui:define>

	<ui:define name="body">
	
	   <hftl:entityPopup id="searchSellerPopup"
			header="#{messages['seller.search']}"
			updateField=":formPanel:formId:sellerSelectId:sellerSelectId"
			selection="#{walletOperationBean.entity.seller}"
			backingBean="#{sellerBean}"
			searchField1Label="#{messages['BusinessEntity.code']}"
			searchField1="code" column1Label="#{messages['BusinessEntity.code']}"
			column1="code"
			column2Label="#{messages['BusinessEntity.description']}"
			column2="description">
		</hftl:entityPopup>  
		<hftl:entityPopup id="searchChargeInstancePopup"
			header="#{messages['walletOperation.chargeInstance']}"
			updateField=":formPanel:formId:chargeInstanceSelectId:chargeInstanceSelectId"
			selection="#{walletOperationBean.entity.chargeInstance}"
			backingBean="#{chargeInstanceBean}"
			searchField1Label="#{messages['BusinessEntity.code']}"
			searchField1="code" column1Label="#{messages['BusinessEntity.code']}"
			column1="code"
			column2Label="#{messages['BusinessEntity.description']}"
			column2="description">
		</hftl:entityPopup>
		<hftl:entityPopup id="searchCounterInstancePopup"
			header="#{messages['counterTemplate.title']}"
			updateField=":formPanel:formId:counterSelectId:counterSelectId"
			selection="#{walletOperationBean.entity.counter}"
			backingBean="#{counterInstanceBean}"
			searchField1Label="#{messages['BusinessEntity.code']}"
			searchField1="code" column1Label="#{messages['BusinessEntity.code']}"
			column1="code"
			column2Label="#{messages['BusinessEntity.description']}"
			column2="description">
		</hftl:entityPopup>
			<hftl:entityPopup id="searchWalletInstancePopup"
			header="#{messages['walletTemplate.title']}"
			updateField=":formPanel:formId:walletSelectId:walletSelectId"
			selection="#{walletOperationBean.entity.wallet}"
			backingBean="#{walletBean}"
			searchField1Label="#{messages['BusinessEntity.code']}"
			searchField1="code" column1Label="#{messages['BusinessEntity.code']}"
			column1="code"
			column2Label="#{messages['BusinessEntity.description']}"
			column2="description">
		</hftl:entityPopup>
		<hftl:entityPopup id="searchPricePlanPopup"
			header="#{messages['pricePlan.title']}"
			backingBean="#{pricePlanMatrixBean}"
			searchField1Label="#{messages['pricePlanMatrix.table.eventCode']}"
			searchField1="eventCode" 
			column1Label="#{messages['BusinessEntity.code']}" column1="eventCode" 
			selection="#{walletOperationBean.entity.priceplan}" 
			updateField=":formPanel:formId:priceplanSelectId:priceplanSelectId">
		</hftl:entityPopup>
		
		 <hf:formPanel id="formPanel"
			label="#{messages['walletOperation.panel']}"
			backingBean="#{walletOperationBean}" renderNewButton="false" showFormButtons="false">
		<hftl:panelGroup columns="2">
		
		 <hf:formField label="#{messages['BusinessEntity.code']}" field="code" />
		 <hf:formField label="#{messages['BusinessEntity.description']}" field="description" />
		  <hf:formEntityField id="sellerSelectId" label="#{messages['seller.parent']}" field="seller" childField="description" popup="true"
					popupId="searchSellerPopup" clearButton="true" />				
		  <hf:formEntityField label="#{messages['walletOperation.chargeInstance']}" id="chargeInstanceSelectId" field="chargeInstance" 
				 childField="code" popup="true" popupId="searchChargeInstancePopup" clearButton="true"/> 	 
		  <hf:formEntityField label="#{messages['counterTemplate.title']}" id="counterSelectId"
		    field="counter" childField="code" popup="true" popupId="searchCounterInstancePopup" clearButton="true"/>
			
			<hf:formEntityField label="#{messages['pricePlan.title']}" id="priceplanSelectId"
		    field="priceplan" childField="eventCode" popup="true" popupId="searchPricePlanPopup" clearButton="true"/>	
		     <hf:formEntityField label="#{messages['operation.wallet']}" id="walletSelectId"
		    field="wallet" childField="code" popup="true" popupId="searchWalletInstancePopup" clearButton="true"/>
		 <hf:formField label="#{messages['walletOperation.operationDate']}" field="operationDate" />
		 <hf:formField label="#{messages['walletOperation.unitAmountWithoutTax']}" field="unitAmountWithoutTax" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['walletOperation.quantity']}" field="quantity" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['invoice.amountWithoutTax']}" field="amountWithoutTax" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['accountOperation.type']}" field="type" isMessage="true" />
		 <hf:formField label="#{messages['walletOperation.unityDescription']}" field="unityDescription" />
		 <hf:formField label="#{messages['walletOperation.taxPercent']}" field="taxPercent" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['walletOperation.unitAmountWithTax']}" field="unitAmountWithTax" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['invoice.amountWithTax']}" field="amountWithTax" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['walletOperation.amountTax']}" field="amountTax" converter="bigDecimal4DigitsConverter" />
		 <hf:formField label="#{messages['walletOperation.param1']}" field="parameter1" />
		 <hf:formField label="#{messages['walletOperation.param2']}" field="parameter2" />
		 <hf:formField label="#{messages['walletOperation.param3']}" field="parameter3" />
		 <hf:formField label="#{messages['walletOperation.startDate']}" field="startDate" />
		 <hf:formField label="#{messages['walletOperation.endDate']}" field="endDate" />
		 <hf:formField label="#{messages['walletOperation.subscriptionDate']}" field="subscriptionDate" />
		 <hf:formField label="#{messages['walletOperation.status']}" field="status" /> 
		 <hf:formField label="#{messages['walletOperation.offer']}" field="offerCode" /> 
		 
       </hftl:panelGroup>

		<p:button id="back" value="#{messages['action.back']}"
			outcome="#{walletOperationBean.back()}" includeViewParams="true">
		</p:button>   
		</hf:formPanel>
	</ui:define>

</ui:composition>
