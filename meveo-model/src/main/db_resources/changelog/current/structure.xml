<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.2.xsd">

	<changeSet id="#655_20150522" author="EdwardLegaspi">
		<createTable tableName="ar_credit_category">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
		</createTable>
		<addUniqueConstraint columnNames="id"
			tableName="ar_credit_category" />
		<addForeignKeyConstraint constraintName="fk_adm_user_creator_ar_credit_category"
			referencedTableName="adm_user" baseColumnNames="creator_id"
			baseTableName="ar_credit_category" referencedColumnNames="id" />
		<addForeignKeyConstraint constraintName="fk_adm_user_updater_ar_credit_category"
			referencedTableName="adm_user" baseColumnNames="updater_id"
			baseTableName="ar_credit_category" referencedColumnNames="id" />

		<createSequence sequenceName="ar_credit_category_seq"
			startValue="6" />

		<addColumn tableName="ar_customer_account">
			<column name="credit_category_id" type="BIGINT" />
		</addColumn>
		<addForeignKeyConstraint constraintName="fk_ar_credit_category_ar_customer_account"
			referencedTableName="ar_credit_category" baseColumnNames="credit_category_id"
			baseTableName="ar_customer_account" referencedColumnNames="id" />

		<addColumn tableName="ar_dunning_plan">
			<column name="credit_category_id" type="BIGINT" />
		</addColumn>
		<addForeignKeyConstraint constraintName="fk_ar_credit_category_ar_dunning_plan"
			referencedTableName="ar_credit_category" baseColumnNames="credit_category_id"
			baseTableName="ar_dunning_plan" referencedColumnNames="id" />
		<dropUniqueConstraint tableName="ar_dunning_plan"
			constraintName="uk_qn6vfgeg5g2y4pb9y6qb8ogjo" />
		<addUniqueConstraint
			columnNames="credit_category_id, payment_method, provider_id, code"
			constraintName="uk_qn6vfgeg5g2y4pb9y6qb8ogjo" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="ar_dunning_plan" />
	</changeSet>


	<changeSet id="ticket787_20150522" author="Mbarek">
		<addUniqueConstraint columnNames="NAME,PROVIDER_ID"
			tableName="MEVEO_TIMER" constraintName="UK_MEVEO_TIMER" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1432229915728-1">
		<createTable tableName="com_meveo_instance">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="as_vendor" type="VARCHAR(255)" />
			<column name="as_version" type="VARCHAR(255)" />
			<column name="creation_date" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="hd_size" type="VARCHAR(255)" />
			<column name="installation_mode" type="VARCHAR(255)" />
			<column name="java_vendor" type="VARCHAR(255)" />
			<column name="java_version" type="VARCHAR(255)" />
			<column name="java_vm_name" type="VARCHAR(255)" />
			<column name="java_vm_version" type="VARCHAR(255)" />
			<column name="key_entreprise" type="VARCHAR(255)" />
			<column name="mac_address" type="VARCHAR(255)" />
			<column name="machine_vendor" type="VARCHAR(255)" />
			<column name="md5" type="VARCHAR(255)" />
			<column name="memory" type="VARCHAR(255)" />
			<column name="nb_cores" type="VARCHAR(255)" />
			<column name="os_arch" type="VARCHAR(255)" />
			<column name="os_name" type="VARCHAR(255)" />
			<column name="ps_version" type="VARCHAR(255)" />
			<column name="owner" type="VARCHAR(255)" />
			<column name="product_name" type="VARCHAR(255)" />
			<column name="product_version" type="VARCHAR(255)" />
			<column name="status" type="VARCHAR(255)" />
			<column name="update_date" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
			<column name="user_id" type="BIGINT" />
			<column name="customer_id" type="BIGINT" />
		</createTable>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1432229915728-3">
		<addPrimaryKey columnNames="id" constraintName="com_meveo_instance_pkey"
			tableName="com_meveo_instance" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1432229915728-5">
		<addUniqueConstraint columnNames="code"
			constraintName="uk_p7r8cy3d1w7g8pir7rxq17071" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="com_meveo_instance" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1432229915728-6">
		<addForeignKeyConstraint baseColumnNames="customer_id"
			baseTableName="com_meveo_instance" constraintName="fk_398jtw7cvvcjmyalvke9iwoqw"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_customer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1432229915728-4">
		<addForeignKeyConstraint baseColumnNames="user_id"
			baseTableName="com_meveo_instance" constraintName="fk_userid"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1432229915728-7">
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="com_meveo_instance" constraintName="fk_2kqwodw5jh9dju2f2m3853y0c"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1432229915728-8">
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="com_meveo_instance" constraintName="fk_6mn1jku9a27nleamaqyke2c63"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1432229915728-13">
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="com_meveo_instance" constraintName="fk_simrfknulxj9dfm6v03k4ejmh"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1432229915728-20">
		<createSequence sequenceName="com_meveo_instance_seq" />
	</changeSet>
	<changeSet id="#791_20150602-3" author="AndriusKarpavicius">
		<addColumn tableName="CRM_CUSTOM_FIELD_TMPL">
			<column name="versionable" type="BOOL" defaultValue="false">
				<constraints nullable="false" />
			</column>
			<column name="calendar_id" type="BIGINT" />
		</addColumn>

		<addColumn tableName="CRM_CUSTOM_FIELD_INST">
			<column name="versionable" type="BOOL" defaultValue="false">
				<constraints nullable="false" />
			</column>
			<column name="calendar_id" type="BIGINT" />
		</addColumn>

		<createTable tableName="CRM_CUSTOM_FIELD_PERIOD">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="PRIORITY" type="INT4" defaultValue="0" />
			<column name="period_end_date" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="period_start_date" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="CF_INSTANCE_ID" type="BIGINT" />
			<column name="date_value" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="double_value" type="FLOAT8" />
			<column name="long_value" type="BIGINT" />
			<column name="string_value" type="VARCHAR(255)" />
		</createTable>

		<addForeignKeyConstraint baseColumnNames="calendar_id"
			baseTableName="CRM_CUSTOM_FIELD_INST" constraintName="fk_CFI_CALENDAR"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CAT_CALENDAR" />

		<addForeignKeyConstraint baseColumnNames="CF_INSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_PERIOD" constraintName="fk_CFP_CFI"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<addForeignKeyConstraint baseColumnNames="calendar_id"
			baseTableName="CRM_CUSTOM_FIELD_TMPL" constraintName="fk_CFT_CALENDAR"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CAT_CALENDAR" />
		<createSequence sequenceName="CRM_CUSTOM_FIELD_PERIOD_seq" />
	</changeSet>

	<changeSet id="#791_20150602-4" author="AndriusKarpavicius">
		<dropSequence sequenceName="CRM_CUSTOM_FIELD_PERIOD_seq" />
		<createSequence sequenceName="crm_custom_field_period_seq" />
	</changeSet>

	<changeSet id="#791_20150602-5" author="AndriusKarpavicius">
		<addUniqueConstraint
			columnNames="CF_INSTANCE_ID, period_start_date, period_end_date"
			tableName="crm_custom_field_period" constraintName="uk_crm_custom_field_period" />
	</changeSet>

	<changeSet id="#852_20150605-2" author="EdwardLegaspi">
		<addNotNullConstraint columnDataType="VARCHAR(255)"
			columnName="COUNTER_TYPE" defaultNullValue="USAGE" tableName="CAT_COUNTER_TEMPLATE" />
		<addNotNullConstraint columnDataType="VARCHAR(255)"
			columnName="COUNTER_LEVEL" defaultNullValue="UA" tableName="CAT_COUNTER_TEMPLATE" />
	</changeSet>

	<!-- #855 begin -->

	<changeSet author="anasseh" id="1433614968312-1">
		<sqlFile endDelimiter="" path="migrationJobs_beforeLiquibase.sql"
			relativeToChangelogFile="true" splitStatements="false" />
	</changeSet>


	<changeSet author="anasseh (generated)" id="1433614968312-2">
		<createSequence sequenceName="meveo_job_instance_seq" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-4">
		<createTable tableName="meveo_job_instance">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="active" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="job_category" type="VARCHAR(255)" />
			<column name="job_template" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="parametres" type="VARCHAR(255)" />
			<column name="user_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
			<column name="timerentity_id" type="BIGINT" />
		</createTable>
	</changeSet>


	<changeSet author="anasseh (generated)" id="1433614968312-7">
		<addColumn tableName="meveo_timer">
			<column name="code" type="varchar(60)">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-8">
		<addColumn tableName="meveo_timer">
			<column name="created" type="timestamp(29, 6)">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-9">
		<addColumn tableName="meveo_timer">
			<column name="creator_id" type="int8" />
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-10">
		<addColumn tableName="meveo_timer">
			<column name="description" type="varchar(100)" />
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-11">
		<addColumn tableName="meveo_timer">
			<column name="disabled" type="bool">
				<constraints nullable="false" />
			</column>
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-12">
		<addColumn tableName="crm_custom_field_inst">
			<column name="job_instance_id" type="int8" />
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-13">
		<addColumn tableName="job_execution">
			<column name="job_launcher" type="varchar(255)" />
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-14">
		<addColumn tableName="meveo_timer">
			<column name="updated" type="timestamp(29, 6)" />
		</addColumn>
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-15">
		<addColumn tableName="meveo_timer">
			<column name="updater_id" type="int8" />
		</addColumn>
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-21">
		<addPrimaryKey columnNames="id" constraintName="meveo_job_instance_pkey"
			tableName="meveo_job_instance" />
	</changeSet>


	<changeSet author="anasseh (generated)" id="1433614968312-24">
		<addUniqueConstraint columnNames="job_template, provider_id"
			constraintName="uk_ljs744oets15tnlf4i6ehe7l6" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_job_instance" />
	</changeSet>
	<changeSet author="AndriusKarpavicius" id="1433614968312-24-1">
		<dropUniqueConstraint tableName="meveo_job_instance"
			constraintName="uk_ljs744oets15tnlf4i6ehe7l6" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_job_instance" deferrable="false" disabled="false"
			initiallyDeferred="false" tableName="meveo_job_instance" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-25">
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_q4ys10jgsw0px36rcvwdajh47" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_timer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-26">
		<addUniqueConstraint
			columnNames="code, subscription_id, account_id, charge_template_id, service_template_id, offer_template_id, access_id, job_instance_id, provider_id"
			constraintName="uk_t8760asnmoo8x2t0k6m0my7mq" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="crm_custom_field_inst" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-28">
		<addForeignKeyConstraint baseColumnNames="job_instance_id"
			baseTableName="crm_custom_field_inst" constraintName="fk_35l2eaa4jvweujsta65d2ott"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_job_instance" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-29">
		<addForeignKeyConstraint baseColumnNames="timerentity_id"
			baseTableName="meveo_job_instance" constraintName="fk_4hgoocwc77rh6ne8fct0f2y2h"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_timer" />
	</changeSet>


	<changeSet author="anasseh (generated)" id="1433614968312-32">
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_job_instance" constraintName="fk_878td2111duoa64gifhuhymhl"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>


	<changeSet author="anasseh (generated)" id="1433614968312-35">
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="meveo_job_instance" constraintName="fk_bupocciymjlmb23huxxftyqtg"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-36">
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_timer" constraintName="fk_dnqwct997aixcp36wuvmxgy12"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-39">
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="meveo_timer" constraintName="fk_liim1csjv7v194u77ddt1dqdp"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-41">
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_job_instance" constraintName="fk_pwc74fn35sffdnmean6swyxha"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-45">
		<dropForeignKeyConstraint baseTableName="crm_custom_field_inst"
			constraintName="fk_customfieldinstmeveotimer" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-48">
		<dropUniqueConstraint constraintName="uk_customfieldinst"
			tableName="crm_custom_field_inst" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-49">
		<dropUniqueConstraint constraintName="uk_meveo_timer"
			tableName="meveo_timer" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-51">
		<dropColumn columnName="active" tableName="meveo_timer" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-53">
		<dropColumn columnName="followingtimerid" tableName="meveo_timer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-54">
		<dropColumn columnName="job_category" tableName="meveo_timer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-55">
		<dropColumn columnName="job_name" tableName="meveo_timer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-56">
		<dropColumn columnName="jobname" tableName="meveo_timer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-57">
		<dropColumn columnName="meveo_timer_id" tableName="crm_custom_field_inst" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-58">
		<dropColumn columnName="name" tableName="meveo_timer" />
	</changeSet>
	<changeSet author="anasseh (generated)" id="1433614968312-59">
		<dropColumn columnName="parametres" tableName="meveo_timer" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="1433614968312-62">
		<dropColumn columnName="userid" tableName="meveo_timer" />
	</changeSet>

	<changeSet author="anasseh" id="1433614968312-63">
		<sqlFile endDelimiter="" path="migrationJobs_afterLiquibase.sql"
			relativeToChangelogFile="true" splitStatements="false" />
	</changeSet>


	<changeSet author="anasseh (generated)" id="855_2015-06-09">
		<addColumn tableName="MEVEO_JOB_INSTANCE">
			<column name="FOLLOWING_JOB_ID" type="BIGINT" />
		</addColumn>
		<addForeignKeyConstraint baseColumnNames="FOLLOWING_JOB_ID"
			baseTableName="meveo_job_instance" constraintName="fk_following_job_id"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="MEVEO_JOB_INSTANCE" />
	</changeSet>
	<!-- #855 end -->

	<changeSet id="790-20150610" author="AndriusKarpavicius">
		<addColumn tableName="CRM_CUSTOM_FIELD_TMPL">
			<column name="DEFAULT_VALUE" type="VARCHAR(50)" />
		</addColumn>
	</changeSet>

	<changeSet author="anasseh (generated)" id="878_2015-06-11">
		<createSequence sequenceName="meveo_script_instance_seq" />
		<createTable tableName="meveo_script_instance">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(200)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="script" type="TEXT">
				<constraints nullable="false" />
			</column>
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
		</createTable>

		<addPrimaryKey columnNames="id" constraintName="meveo_script_instance_pkey"
			tableName="meveo_script_instance" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_script_instance" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_script_instance" />
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_script_instance" constraintName="fk_meveoscript_creator"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />

		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="meveo_script_instance" constraintName="fk_meveoscript_updater"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />

		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_script_instance" constraintName="fk_meveoscript_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />

		<addColumn tableName="ADM_NOTIFICATION">
			<column name="SCRIPT_INSTANCE_ID" type="int8" />
		</addColumn>

		<createTable tableName="MEVEO_SCRIPT_INSTANCE_PARAMS">
			<column name="ScriptInstance_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="params" type="VARCHAR(255)" />
			<column name="params_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="ScriptInstance_ID, params_key"
			constraintName="PK_MEVEO_SCRIPT_INSTANCE_PARAMS" tableName="MEVEO_SCRIPT_INSTANCE_PARAMS" />

		<addForeignKeyConstraint baseColumnNames="ScriptInstance_ID"
			baseTableName="MEVEO_SCRIPT_INSTANCE_PARAMS" constraintName="fk_params_script_instance"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_script_instance" />

		<addForeignKeyConstraint baseColumnNames="SCRIPT_INSTANCE_ID"
			baseTableName="ADM_NOTIFICATION" constraintName="fk_notif_script_instance"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_script_instance" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="878_2015-06-11_1">
		<dropUniqueConstraint tableName="meveo_script_instance"
			constraintName="uk_meveo_script_instance" />

		<addUniqueConstraint columnNames="code"
			constraintName="uk_meveo_script_instance" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_script_instance" />
	</changeSet>

	<changeSet author="anasseh (generated)" id="878_2015-06-11_2">
		<addColumn tableName="meveo_script_instance">
			<column name="SRC_TYPE" type="VARCHAR(100)" />
		</addColumn>
	</changeSet>

	<changeSet id="ticket794_20150616" author="Mbarek">
		<addColumn tableName="CAT_COUNTER_TEMPLATE">
			<column name="CEILING_EXPRESSION_EL" type="VARCHAR(1000)" />
		</addColumn>
	</changeSet>

	<changeSet author="anasseh (generated)" id="878_2015-06-11_3">
		<dropTable cascadeConstraints="true" tableName="MEVEO_SCRIPT_INSTANCE_PARAMS" />

		<createTable tableName="MEVEO_SCRIPT_INSTANCE_PARAMS">
			<column name="scriptinstance_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="params" type="VARCHAR(255)" />
			<column name="params_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="scriptinstance_id, params_key"
			constraintName="PK_MEVEO_SCRIPT_INSTANCE_PARAMS" tableName="MEVEO_SCRIPT_INSTANCE_PARAMS" />

		<addForeignKeyConstraint baseColumnNames="scriptinstance_id"
			baseTableName="MEVEO_SCRIPT_INSTANCE_PARAMS" constraintName="fk_params_script_instance"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_script_instance" />

	</changeSet>

	<changeSet author="anasseh (generated)" id="887_2015-06-19">

		<createTable tableName="ADM_NOTIF_JOB">
			<column name="JOB_INSTANCE_ID" type="BIGINT" />
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="id" constraintName="ADM_NOTIF_JOB_pkey"
			tableName="ADM_NOTIF_JOB" />

		<addForeignKeyConstraint baseColumnNames="JOB_INSTANCE_ID"
			baseTableName="ADM_NOTIF_JOB" constraintName="fk_job_trigger_notif"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="MEVEO_JOB_INSTANCE" />

		<createTable tableName="ADM_NOTIF_JOB_PARAMS">
			<column name="jobtrigger_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="params" type="VARCHAR(255)" />
			<column name="params_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="jobtrigger_id, params_key"
			constraintName="PK_ADM_NOTIF_JOB_PARAMS" tableName="ADM_NOTIF_JOB_PARAMS" />

		<addForeignKeyConstraint baseColumnNames="jobtrigger_id"
			baseTableName="ADM_NOTIF_JOB_PARAMS" constraintName="fk_params_job_trigger"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="ADM_NOTIF_JOB" />

	</changeSet>
	<changeSet id="684" author="AndriusKarpavicius">
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_billing_invoice_configuration" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="billing_invoice_configuration" />
	</changeSet>
	<changeSet id="789-2015623-1" author="TyshanShi">
		<addColumn tableName="CRM_CUSTOM_FIELD_TMPL">
			<column name="ENTITY_CLAZZ" type="varchar(255)" />
		</addColumn>
		<addColumn tableName="CRM_CUSTOM_FIELD_INST">
			<column name="ENTITY_VALUE" type="varchar(255)" />
		</addColumn>
	</changeSet>

	<changeSet id="ticket895_20150623" author="Mbarek">
		<addColumn tableName="RATING_EDR">
			<column name="PARAMETER_5" type="VARCHAR(255)" />
			<column name="PARAMETER_6" type="VARCHAR(255)" />
			<column name="PARAMETER_7" type="VARCHAR(255)" />
			<column name="PARAMETER_8" type="VARCHAR(255)" />
			<column name="PARAMETER_9" type="VARCHAR(255)" />
			<column name="DATE_PARAMETER_1" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="DATE_PARAMETER_2" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="DATE_PARAMETER_3" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="DATE_PARAMETER_4" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="DATE_PARAMETER_5" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="DECIMAL_PARAMETER_1" type="numeric(23, 12)" />
			<column name="DECIMAL_PARAMETER_2" type="numeric(23, 12)" />
			<column name="DECIMAL_PARAMETER_3" type="numeric(23, 12)" />
			<column name="DECIMAL_PARAMETER_4" type="numeric(23, 12)" />
			<column name="DECIMAL_PARAMETER_5" type="numeric(23, 12)" />
		</addColumn>
	</changeSet>

	<changeSet id="ticket903_20150625" author="Mbarek">
		<addColumn tableName="RATING_EDR">
			<column name="ACCESS_CODE" type="VARCHAR(255)" />
		</addColumn>
	</changeSet>
	<changeSet id="789_20150630_1" author="TyshanShi">
		<addColumn tableName="CRM_CUSTOM_FIELD_TMPL">
			<column name="STORAGE_TYPE" type="varchar(255)" />
		</addColumn>
		<!-- date -->
		<createTable tableName="CRM_CUSTOM_FIELD_INST_DATE_LIST">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="DATELIST" type="TIMESTAMP WITHOUT TIME ZONE" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_DATE_LIST" constraintName="fk_17rhtrdn4ejg92v2r0kqb1rn6"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<createTable tableName="CRM_CUSTOM_FIELD_INST_DATE_MAP">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="DATEMAP_KEY" type="VARCHAR(255)" />
			<column name="DATEMAP" type="TIMESTAMP WITHOUT TIME ZONE" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_DATE_MAP" constraintName="fk_f4ng0tdoqvn52hpdr1lpedj5a"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<!-- long -->
		<createTable tableName="CRM_CUSTOM_FIELD_INST_LONG_LIST">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="LONGLIST" type="BIGINT" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_LONG_LIST" constraintName="fk_1gvv6bnuh584j4fiq4jq5wjbj"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<createTable tableName="CRM_CUSTOM_FIELD_INST_LONG_MAP">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="LONGMAP_KEY" type="VARCHAR(255)" />
			<column name="LONGMAP" type="BIGINT" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_LONG_MAP" constraintName="fk_14kjq164eqf0s0lf9hj9ph3yf"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />

		<!-- double -->
		<createTable tableName="CRM_CUSTOM_FIELD_INST_DOUB_LIST">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="DOUBLELIST" type="float8" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_DOUB_LIST" constraintName="fk_t7qdueeagl42j4ol5jhe9347f"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<createTable tableName="CRM_CUSTOM_FIELD_INST_DOUB_MAP">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="DOUBLEMAP_KEY" type="VARCHAR(255)" />
			<column name="DOUBLEMAP" type="float8" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_DOUB_MAP" constraintName="fk_m2ebwk97gh5mxvfmic66k0j0y"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<!-- string -->
		<createTable tableName="CRM_CUSTOM_FIELD_INST_STR_LIST">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="STRINGLIST" type="varchar(255)" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_STR_LIST" constraintName="fk_ivjnwp66uktesnuxjcs4xaewu"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<createTable tableName="CRM_CUSTOM_FIELD_INST_STR_MAP">
			<column name="CUSTOMFIELDINSTANCE_ID" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="STRINGMAP_KEY" type="VARCHAR(255)" />
			<column name="STRINGMAP" type="VARCHAR(255)" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="CUSTOMFIELDINSTANCE_ID"
			baseTableName="CRM_CUSTOM_FIELD_INST_STR_MAP" constraintName="fk_hqkd0t9i2xw7jvi2d5v36fc2q"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="CRM_CUSTOM_FIELD_INST" />
		<addColumn tableName="CRM_CUSTOM_FIELD_PERIOD">
			<column name="ENTITY_VALUE" type="varchar(255)"></column>
		</addColumn>
	</changeSet>

	<changeSet author="anasseh" id="#907_01072015_2">
		<modifyDataType columnName="string_value" newDataType="text"
			tableName="crm_custom_field_inst" />
	</changeSet>

	<changeSet id="805_20150701" author="AndriusKarpavicius">
		<addColumn tableName="COM_MEVEO_INSTANCE">
			<column name="URL" type="VARCHAR(60)" defaultValue="http://" />
		</addColumn>
		<addNotNullConstraint tableName="COM_MEVEO_INSTANCE"
			columnName="URL" />
	</changeSet>

	<changeSet id="789_2015703_1" author="TyshanShi">
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_DATE_LIST" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_DATE_LIST" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_DATE_MAP" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_DATE_MAP" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_LONG_LIST" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_LONG_LIST" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_LONG_MAP" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_LONG_MAP" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_DOUB_LIST" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_DOUB_LIST" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_DOUB_MAP" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_DOUB_MAP" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_STR_LIST" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_STR_LIST" />
		<dropAllForeignKeyConstraints
			baseTableName="CRM_CUSTOM_FIELD_INST_STR_MAP" />
		<dropTable tableName="CRM_CUSTOM_FIELD_INST_STR_MAP" />
		<modifyDataType columnName="entity_value" newDataType="text"
			tableName="CRM_CUSTOM_FIELD_INST" />
		<modifyDataType columnName="entity_value" newDataType="text"
			tableName="CRM_CUSTOM_FIELD_PERIOD" />
	</changeSet>

	<changeSet id="797_20150706" author="Mbarek">
		<sql>update CRM_CUSTOM_FIELD_INST set PROVIDER_ID=null</sql>
	</changeSet>

	<changeSet id="#941_20150710" author="smichea">
		<addColumn tableName="RATING_EDR">
			<column name="HEADER_EDR_ID" type="BIGINT">
				<constraints nullable="true" />
			</column>
		</addColumn>
		<addForeignKeyConstraint baseColumnNames="HEADER_EDR_ID"
			baseTableName="RATING_EDR" constraintName="fk_headeredrid"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="RATING_EDR" />
	</changeSet>

	<changeSet id="#950_20150717" author="smichea">
		<addColumn tableName="BILLING_WALLET_OPERATION">
			<column name="EDR_ID" type="BIGINT">
				<constraints nullable="true" />
			</column>
		</addColumn>
		<addForeignKeyConstraint baseColumnNames="EDR_ID"
			baseTableName="BILLING_WALLET_OPERATION" constraintName="fk_wopEdrId"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="RATING_EDR" />
		<addColumn tableName="BILLING_RATED_TRANSACTION">
			<column name="EDR_ID" type="BIGINT">
				<constraints nullable="true" />
			</column>
		</addColumn>
		<addForeignKeyConstraint baseColumnNames="EDR_ID"
			baseTableName="BILLING_RATED_TRANSACTION" constraintName="fk_ropEdrId"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="RATING_EDR" />
	</changeSet>

	<changeSet id="#947_20150721" author="EdwardLegaspi">
		<addColumn tableName="CRM_CUSTOM_FIELD_INST">
			<column name="TRIGGER_END_PERIOD_EVENT" type="boolean"
				defaultValueBoolean="false" />
		</addColumn>
		<addColumn tableName="CRM_CUSTOM_FIELD_TMPL">
			<column name="TRIGGER_END_PERIOD_EVENT" type="boolean"
				defaultValueBoolean="false" />
		</addColumn>
	</changeSet>

	<changeSet id="#948_20150723" author="smichea">
		<addColumn tableName="CAT_PRICE_PLAN_MATRIX">
			<column name="AMOUNT_WITHOUT_TAX_EL" type="VARCHAR(2000)">
				<constraints nullable="true" />
			</column>
		</addColumn>
		<addColumn tableName="CAT_PRICE_PLAN_MATRIX">
			<column name="AMOUNT_WITH_TAX_EL" type="VARCHAR(2000)">
				<constraints nullable="true" />
			</column>
		</addColumn>
	</changeSet>

	<changeSet id="#971_20150727" author="EdwardLegaspi">
		<createTable tableName="meveo_filter">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
			<column name="target_entity" type="VARCHAR(100)">
				<constraints nullable="false" />
			</column>
		</createTable>
		<addPrimaryKey columnNames="id" constraintName="meveo_filter_pkey"
			tableName="meveo_filter" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_filter_provider" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_filter" />
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_adm_user_updater"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_adm_user_creator"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<createSequence sequenceName="meveo_filter_seq" />

		<createTable tableName="meveo_filter_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="filter_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="field_name" type="VARCHAR(60)" />
			<column name="operand" type="VARCHAR(60)" />
			<column name="el" type="VARCHAR(2000)" />
			<column name="sql" type="VARCHAR(2000)" />
		</createTable>
		<addForeignKeyConstraint baseColumnNames="filter_id"
			baseTableName="meveo_filter_condition" constraintName="fk_meveo_filter_condition_meveo_filter"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_filter" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_filter_condition" constraintName="fk_meveo_filter_condition_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<createSequence sequenceName="meveo_filter_condition_seq"
			startValue="1" />

		<createTable tableName="meveo_projector">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
			<column name="target_entity" type="VARCHAR(100)">
				<constraints nullable="false" />
			</column>
		</createTable>
		<addPrimaryKey columnNames="id" constraintName="meveo_projector_pkey"
			tableName="meveo_projector" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_projector_provider" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_projector" />

		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_projector" constraintName="fk_meveo_projector_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_projector" constraintName="fk_meveo_projector_adm_user_creator"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<createSequence sequenceName="meveo_projector_seq"
			startValue="1" />

		<createTable tableName="MEVEO_PROJECTOR_FIELD_NAME">
			<column name="projector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="FIELD_NAME" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="projector_id"
			baseTableName="MEVEO_PROJECTOR_FIELD_NAME" constraintName="fk_MEVEO_PROJECTOR_FIELD_NAME_meveo_projector"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_projector" />

		<createTable tableName="MEVEO_PROJECTOR_IGNORE_FIELD">
			<column name="projector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="IGNORED_FIELD" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="projector_id"
			baseTableName="MEVEO_PROJECTOR_IGNORE_FIELD" constraintName="fk_MEVEO_PROJECTOR_IGNORE_FIELD_meveo_projector"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_projector" />
	</changeSet>


	<changeSet id="#953_20150727" author="smichea">
		<dropSequence sequenceName="billing_priceplan_inst_seq" />
		<dropTable tableName="billing_priceplan_inst" />
		<dropSequence sequenceName="billing_serv_param_inst_seq" />
		<dropTable cascadeConstraints="true" tableName="billing_serv_param_inst" />
		<dropSequence sequenceName="medina_cdr_file_seq" />
		<dropTable cascadeConstraints="true" tableName="medina_cdr_file" />
		<dropSequence sequenceName="medina_cdr_seq" />
		<dropTable cascadeConstraints="true" tableName="medina_cdr" />
		<dropSequence sequenceName="medina_number_plan_seq" />
		<dropTable cascadeConstraints="true" tableName="medina_number_plan" />
		<dropSequence sequenceName="medina_rejected_cdr_seq" />
		<dropTable cascadeConstraints="true" tableName="medina_rejected_cdr" />
		<dropSequence sequenceName="medina_time_plan_seq" />
		<dropTable cascadeConstraints="true" tableName="medina_time_plan" />
		<dropSequence sequenceName="medina_zonning_plan_seq" />
		<dropTable cascadeConstraints="true" tableName="medina_zonning_plan" />
		<dropSequence sequenceName="mediation_magic_numbers_seq" />
		<dropTable cascadeConstraints="true" tableName="mediation_magic_numbers" />
	</changeSet>

	<changeSet id="#910_20150729" author="AndriusKarpavicius">
		<addColumn tableName="COM_MEVEO_INSTANCE">
			<column name="AUTH_USERNAME" type="VARCHAR(60)" />
			<column name="AUTH_PASSWORD" type="VARCHAR(60)" />
		</addColumn>

	</changeSet>

	<changeSet id="#995_20150730" author="EdwardLegaspi">
		<sql>update billing_billing_account set electronic_billing=false where
			electronic_billing is null
		</sql>
	</changeSet>
	<changeSet id="#789_20150730" author="TyshanShi">
		<addColumn tableName="CRM_CUSTOM_FIELD_PERIOD">
			<column name="LABEL" type="VARCHAR(255)" />
		</addColumn>
	</changeSet>

	<changeSet id="#971_20150729" author="EdwardLegaspi">

		<dropAllForeignKeyConstraints
			baseTableName="meveo_filter_condition" />
		<dropAllForeignKeyConstraints
			baseTableName="meveo_filter" />
		<dropAllForeignKeyConstraints
			baseTableName="meveo_projector_seq" />
		<dropAllForeignKeyConstraints
			baseTableName="MEVEO_PROJECTOR_FIELD_NAME" />
		<dropAllForeignKeyConstraints
			baseTableName="MEVEO_PROJECTOR_IGNORE_FIELD" />
		<dropSequence sequenceName="meveo_filter_condition_seq" />
		<dropSequence sequenceName="meveo_filter_seq" />
		<dropSequence sequenceName="meveo_projector_seq" />
		<dropTable tableName="MEVEO_PROJECTOR_IGNORE_FIELD" />
		<dropTable tableName="MEVEO_PROJECTOR_FIELD_NAME" />
		<dropTable tableName="meveo_filter_condition" />
		<dropTable tableName="meveo_filter" />
		<dropTable tableName="meveo_projector" />

		<createTable tableName="meveo_filter_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="composite_and_filter_condition_id" type="BIGINT" />
			<column name="composite_or_filter_condition_id" type="BIGINT" />
			<column name="filter_condition_type" type="VARCHAR(50)">
				<constraints nullable="false" />
			</column>
		</createTable>
		<addPrimaryKey columnNames="id" constraintName="meveo_filter_condition_pkey"
			tableName="meveo_filter_condition" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_filter_condition" constraintName="fk_meveo_filter_condition_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />

		<createSequence sequenceName="meveo_filter_condition_seq"
			startValue="1" />

		<createTable tableName="meveo_filter_oc_field_names">
			<column name="field_name" type="VARCHAR(100)" />
			<column name="order_condition_id" type="BIGINT" />
		</createTable>

		<createTable tableName="meveo_filter_order_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="ascending" type="boolean" />
		</createTable>

		<addPrimaryKey columnNames="id"
			constraintName="meveo_filter_order_condition_pkey" tableName="meveo_filter_order_condition" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_filter_order_condition" constraintName="fk_meveo_filter_order_condition_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="order_condition_id"
			baseTableName="meveo_filter_oc_field_names" constraintName="fk_meveo_filter_order_condition_field_names"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id"
			referencedTableName="meveo_filter_order_condition" />
		<createSequence sequenceName="meveo_filter_order_condition_seq"
			startValue="1" />

		<createTable tableName="meveo_primitive_filter_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="field_name" type="VARCHAR(60)" />
			<column name="operator" type="VARCHAR(60)" />
			<column name="operand" type="VARCHAR(60)" />
		</createTable>

		<addPrimaryKey columnNames="id"
			constraintName="meveo_primitive_filter_condition_pkey" tableName="meveo_primitive_filter_condition" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_primitive_filter_condition" constraintName="fk_meveo_primitive_filter_condition_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<createSequence sequenceName="meveo_primitive_filter_condition_seq"
			startValue="1" />

		<createTable tableName="meveo_native_filter_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="el" type="VARCHAR(2000)" />
			<column name="jpql" type="VARCHAR(2000)" />
		</createTable>

		<addPrimaryKey columnNames="id"
			constraintName="meveo_native_filter_condition_pkey" tableName="meveo_native_filter_condition" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_native_filter_condition" constraintName="fk_meveo_native_filter_condition_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<createSequence sequenceName="meveo_native_filter_condition_seq"
			startValue="1" />

		<createTable tableName="meveo_projector">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
			<column name="target_entity" type="VARCHAR(100)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="id" constraintName="meveo_projector_pkey"
			tableName="meveo_projector" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_projector_provider" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_projector" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_projector" constraintName="fk_meveo_projector_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_projector" constraintName="fk_meveo_projector_adm_user_creator"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="meveo_projector" constraintName="fk_meveo_projector_adm_user_updater"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<createSequence sequenceName="meveo_projector_seq"
			startValue="1" />

		<createTable tableName="meveo_projector_display_fields">
			<column name="projector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="display_field" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="projector_id"
			baseTableName="meveo_projector_display_fields" constraintName="fk_meveo_projector_display_fields_meveo_projector"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_projector" />

		<createTable tableName="meveo_projector_export_fields">
			<column name="projector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="export_field" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="projector_id"
			baseTableName="meveo_projector_export_fields" constraintName="fk_meveo_projector_export_fields_meveo_projector"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_projector" />

		<createTable tableName="meveo_projector_ignore_fields">
			<column name="projector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="ignored_field" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="projector_id"
			baseTableName="meveo_projector_ignore_fields" constraintName="fk_meveo_projector_ignore_fields_meveo_projector"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_projector" />

		<createTable tableName="meveo_filter">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />

			<column name="filter_condition_id" type="BIGINT" />
			<column name="order_condition_id" type="BIGINT" />
			<column name="primary_selector_id" type="BIGINT" />
			<column name="input_xml" type="text" />
		</createTable>
		<addPrimaryKey columnNames="id" constraintName="meveo_filter_pkey"
			tableName="meveo_filter" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_filter_provider" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="meveo_filter" />
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_adm_user_updater"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_adm_user_creator"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<addForeignKeyConstraint baseColumnNames="filter_condition_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_filter_condition"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_filter_condition" />
		<addForeignKeyConstraint baseColumnNames="order_condition_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_order_condition"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id"
			referencedTableName="meveo_filter_order_condition" />
		<createSequence sequenceName="meveo_filter_seq"
			startValue="1" />

		<createTable tableName="meveo_filter_selector">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="target_entity" type="VARCHAR(100)">
				<constraints nullable="false" />
			</column>
			<column name="alias" type="VARCHAR(50)" />
			<column name="projector_id" type="BIGINT" />
			<column name="filter_id" type="BIGINT" />
		</createTable>

		<addPrimaryKey columnNames="id" constraintName="meveo_filter_selector_pkey"
			tableName="meveo_filter_selector" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_filter_selector" constraintName="fk_meveo_filter_selector_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="projector_id"
			baseTableName="meveo_filter_selector" constraintName="fk_meveo_filter_selector_meveo_projector"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="meveo_projector" />
		<addForeignKeyConstraint baseColumnNames="filter_id"
			baseTableName="meveo_filter_selector" constraintName="fk_meveo_filter_secondary_selector"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_filter" />
		<addForeignKeyConstraint baseColumnNames="primary_selector_id"
			baseTableName="meveo_filter" constraintName="fk_meveo_filter_primary_selector"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_filter_selector" />
		<createSequence sequenceName="meveo_filter_selector_seq"
			startValue="1" />

		<createTable tableName="meveo_or_composite_filter_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
		</createTable>

		<addPrimaryKey columnNames="id"
			constraintName="meveo_or_composite_filter_condition_pkey" tableName="meveo_or_composite_filter_condition" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_or_composite_filter_condition" constraintName="fk_meveo_or_composite_filter_condition_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="composite_or_filter_condition_id"
			baseTableName="meveo_filter_condition" constraintName="fk_meveo_or_composite_filter_condition_or"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id"
			referencedTableName="meveo_or_composite_filter_condition" />

		<createTable tableName="meveo_and_composite_filter_condition">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
		</createTable>

		<addPrimaryKey columnNames="id"
			constraintName="meveo_and_composite_filter_condition_pkey" tableName="meveo_and_composite_filter_condition" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="meveo_and_composite_filter_condition" constraintName="fk_meveo_and_composite_filter_condition_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="composite_and_filter_condition_id"
			baseTableName="meveo_filter_condition" constraintName="fk_meveo_and_composite_filter_condition_and"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id"
			referencedTableName="meveo_and_composite_filter_condition" />
	</changeSet>

	<changeSet id="#971_20150804" author="EdwardLegaspi">
		<addColumn tableName="meveo_filter">
			<column name="shared" type="BOOL" defaultValueBoolean="false"></column>
		</addColumn>
	</changeSet>

	<changeSet id="#971_20150805" author="EdwardLegaspi">
		<dropForeignKeyConstraint baseTableName="meveo_filter_selector"
			constraintName="fk_meveo_filter_selector_meveo_projector" />
		<dropColumn tableName="meveo_filter_selector" columnName="projector_id" />
		<dropTable tableName="meveo_projector_display_fields" />
		<dropTable tableName="meveo_projector_export_fields" />
		<dropTable tableName="meveo_projector_ignore_fields" />
		<dropSequence sequenceName="meveo_projector_seq" />
		<dropTable tableName="meveo_projector" />

		<createTable tableName="meveo_filter_selector_display_fields">
			<column name="filter_selector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="display_field" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="filter_selector_id"
			baseTableName="meveo_filter_selector_display_fields" constraintName="fk_meveo_filter_selector_display_fields"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_filter_selector" />

		<createTable tableName="meveo_filter_selector_export_fields">
			<column name="filter_selector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="export_field" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="filter_selector_id"
			baseTableName="meveo_filter_selector_export_fields" constraintName="fk_meveo_filter_selector_export_fields"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_filter_selector" />

		<createTable tableName="meveo_filter_selector_ignore_fields">
			<column name="filter_selector_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="ignored_field" type="VARCHAR(100)"></column>
		</createTable>
		<addForeignKeyConstraint baseColumnNames="filter_selector_id"
			baseTableName="meveo_filter_selector_ignore_fields" constraintName="fk_filter_selector_ignore_fields"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="meveo_filter_selector" />

	</changeSet>

	<changeSet id="#981_20150805" author="Mbarek">
		<addColumn tableName="BILLING_INVOICE_CONFIGURATION">
			<column name="display_edrs" type="BOOL" defaultValueBoolean="false"></column>
		</addColumn>
	</changeSet>

	<changeSet id="#640_20150807" author="AndriusKarpavicius">
		<addColumn tableName="JOB_EXECUTION">
			<column name="JOB_INSTANCE_ID" type="BIGINT" />
		</addColumn>
		<sql>update job_execution set job_instance_id = (select
			min(MEVEO_JOB_INSTANCE.id) from MEVEO_JOB_INSTANCE where
			MEVEO_JOB_INSTANCE.code=job_execution.job_name or
			MEVEO_JOB_INSTANCE.job_template=job_execution.job_name)
		</sql>
		<sql>delete from job_execution where job_instance_id is null</sql>
		<dropColumn tableName="JOB_EXECUTION" columnName="JOB_NAME" />
		<addNotNullConstraint tableName="JOB_EXECUTION"
			columnName="JOB_INSTANCE_ID" />
		<addForeignKeyConstraint baseColumnNames="JOB_INSTANCE_ID"
			baseTableName="JOB_EXECUTION" constraintName="FK_JOB_EXECUTION_JOB_INSTANCE_ID"
			deferrable="false" initiallyDeferred="false" onDelete="CASCADE"
			onUpdate="CASCADE" referencedColumnNames="id" referencedTableName="MEVEO_JOB_INSTANCE" />
	</changeSet>

	<changeSet id="#981_20150813" author="Mbarek">
		<addColumn tableName="AR_DDREQUEST_LOT">
			<column name="REJECTED_CAUSE" type="VARCHAR(255)"></column>
			<column name="REJECTED_INVOICES" type="INT4"></column>
		</addColumn>
	</changeSet>

	<changeSet id="789-20150819-2" author="AndriusKarpavicius">
		<dropColumn tableName="CRM_CUSTOM_FIELD_INST" columnName="ENTITY_VALUE" />
		<addColumn tableName="CRM_CUSTOM_FIELD_INST">
			<column name="SERIALIZED_VALUE" type="varchar(500)" />
		</addColumn>

		<dropColumn tableName="CRM_CUSTOM_FIELD_PERIOD" columnName="ENTITY_VALUE" />
		<addColumn tableName="CRM_CUSTOM_FIELD_PERIOD">
			<column name="SERIALIZED_VALUE" type="varchar(500)" />
		</addColumn>

		<dropColumn tableName="CRM_CUSTOM_FIELD_PERIOD" columnName="label" />
	</changeSet>

	<changeSet id="1034-20150828" author="anasseh">
		<dropTable tableName="MEVEO_SCRIPT_INSTANCE_PARAMS" />

		<createTable tableName="ADM_NOTIFICATION_PARAMS">
			<column name="notification_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="params" type="VARCHAR(255)" />
			<column name="params_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="notification_id, params_key"
			constraintName="PK_ADM_NOTIFICATION_PARAMS" tableName="ADM_NOTIFICATION_PARAMS" />

		<addForeignKeyConstraint baseColumnNames="notification_id"
			baseTableName="ADM_NOTIFICATION_PARAMS" constraintName="fk_params_notification"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_notification" />

	</changeSet>

	<changeSet id="1005-20150830" author="AndriusKarpavicius">
		<addColumn tableName="CRM_CUSTOM_FIELD_TMPL">
			<column name="CACHE_VALUE_FOR" type="int" />
		</addColumn>
	</changeSet>
	<changeSet id="1034-20150828-2" author="anasseh">
		<dropColumn columnName="ACTION_EXPRESSION" tableName="ADM_NOTIFICATION" />
	</changeSet>

	<changeSet id="1034-20150828-3" author="anasseh">
		<dropTable tableName="ADM_NOTIF_JOB_PARAMS" />
		<createTable tableName="ADM_NOTIF_JOB_PARAMS">
			<column name="jobtrigger_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="jobparams" type="VARCHAR(255)" />
			<column name="jobparams_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="jobtrigger_id, jobparams_key"
			constraintName="PK_ADM_NOTIF_JOB_PARAMS" tableName="ADM_NOTIF_JOB_PARAMS" />

		<addForeignKeyConstraint baseColumnNames="jobtrigger_id"
			baseTableName="ADM_NOTIF_JOB_PARAMS" constraintName="fk_params_job_trigger"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="ADM_NOTIF_JOB" />

	</changeSet>
	<changeSet id="1034-20150828-4" author="anasseh">
		<renameTable newTableName="adm_notif_webhook_param_old"
			oldTableName="adm_notif_webhook_param" />

		<createTable tableName="adm_notif_webhook_param">
			<column name="webhook_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="webhookparams" type="VARCHAR(255)" />
			<column name="webhookparams_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
		</createTable>

		<addPrimaryKey columnNames="webhook_id, webhookparams_key"
			constraintName="adm_notif_webhookparam_pkey" tableName="adm_notif_webhook_param" />
		<addForeignKeyConstraint baseColumnNames="webhook_id"
			baseTableName="adm_notif_webhook_param" constraintName="fk_17fe7mcjmmcgcntqmjm9hlaots"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_notif_webhooks" />
	</changeSet>

	<changeSet id="1_20150831" author="Mbarek">
		<addColumn tableName="CAT_PRICE_PLAN_MATRIX">
			<column name="SEQUENCE" type="BIGINT" />
		</addColumn>
	</changeSet>

	<changeSet id="#1028_20150902" author="anasseh">
		<createTable tableName="MEVEO_SCRIPT_INSTANCE_ERROR">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="message" type="VARCHAR(255)" />
			<column name="line_number" type="BIGINT" />
			<column name="column_number" type="BIGINT" />
			<column name="source_file" type="VARCHAR(255)" />
			<column name="script_instance_id" type="BIGINT" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
		</createTable>
		<addPrimaryKey columnNames="id"
			constraintName="MEVEO_SCRIPT_INSTANCE_ERROR_pkey" tableName="MEVEO_SCRIPT_INSTANCE_ERROR" />
		<addUniqueConstraint columnNames="id"
			tableName="MEVEO_SCRIPT_INSTANCE_ERROR" />
		<addForeignKeyConstraint constraintName="fk_creator_MEVEO_SCRIPT_INSTANCE_ERROR"
			referencedTableName="adm_user" baseColumnNames="creator_id"
			baseTableName="MEVEO_SCRIPT_INSTANCE_ERROR" referencedColumnNames="id" />
		<addForeignKeyConstraint constraintName="fk_updater_MEVEO_SCRIPT_INSTANCE_ERROR"
			referencedTableName="adm_user" baseColumnNames="updater_id"
			baseTableName="MEVEO_SCRIPT_INSTANCE_ERROR" referencedColumnNames="id" />
		<addForeignKeyConstraint
			constraintName="fk_script-instance_MEVEO_SCRIPT_INSTANCE_ERROR"
			referencedTableName="MEVEO_SCRIPT_INSTANCE" baseColumnNames="script_instance_id"
			baseTableName="MEVEO_SCRIPT_INSTANCE_ERROR" referencedColumnNames="id" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="MEVEO_SCRIPT_INSTANCE_ERROR" constraintName="fk_provider_MEVEO_SCRIPT_INSTANCE_ERROR"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<createSequence sequenceName="MEVEO_SCRIPT_INSTANCE_ERROR_SEQ"
			startValue="1" />
	</changeSet>
	<changeSet id="#1028_20150902-2" author="anasseh">
		<addColumn tableName="MEVEO_SCRIPT_INSTANCE">
			<column name="IS_ERROR" type="BOOL" />
		</addColumn>
	</changeSet>

	<changeSet author="anasseh" id="multiProvider_09092015">
		<dropUniqueConstraint constraintName="uk_meveo_script_instance"
			tableName="MEVEO_SCRIPT_INSTANCE" />
		<addUniqueConstraint columnNames="code, provider_id"
			constraintName="uk_meveo_script_instance" deferrable="false"
			disabled="false" initiallyDeferred="false" tableName="MEVEO_SCRIPT_INSTANCE" />
	</changeSet>

	<changeSet author="EdwardLegaspi" id="20150917">
		<addColumn tableName="meveo_primitive_filter_condition">
			<column name="operand2" type="VARCHAR(255)"></column>
		</addColumn>

		<sql>UPDATE MEVEO_PRIMITIVE_FILTER_CONDITION SET operand2=operand;
		</sql>

		<dropColumn tableName="meveo_primitive_filter_condition"
			columnName="operand" />

		<renameColumn tableName="meveo_primitive_filter_condition"
			oldColumnName="operand2" newColumnName="operand" />
	</changeSet>

	<changeSet author="AndriusKarpavicius" id="#1094_20150929">
		<addColumn tableName="CRM_CUSTOM_FIELD_INST">
			<column name="seller_id" type="BIGINT" />
		</addColumn>

		<addForeignKeyConstraint constraintName="fk_seller_id_crm_custom_field_inst"
			referencedTableName="CRM_SELLER" baseColumnNames="seller_id"
			baseTableName="CRM_CUSTOM_FIELD_INST" referencedColumnNames="id" />
	</changeSet>

	<changeSet author="anasseh" id="#1117_20151005">
		<addColumn tableName="BILLING_CYCLE">
			<column name="INVOICING_THRESHOLD" type="numeric(23, 12)" />
		</addColumn>
	</changeSet>

	<changeSet author="AndriusKarpavicius" id="#1123_20151006">
		<dropColumn tableName="MEVEO_JOB_INSTANCE" columnName="user_id" />
	</changeSet>

	<changeSet author="EdwardLegaspi" id="#1105_20150930">
		<addColumn tableName="ar_account_operation">
			<column name="credit_note_date" type="TIMESTAMP WITHOUT TIME ZONE"></column>
		</addColumn>

		<createTable tableName="billing_credit_note">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="disabled" type="BOOL">
				<constraints nullable="false" />
			</column>
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
			<column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
				<constraints nullable="false" />
			</column>
			<column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
			<column name="provider_id" type="BIGINT" />
			<column name="creator_id" type="BIGINT" />
			<column name="updater_id" type="BIGINT" />
			<column name="billing_account_id" type="BIGINT" />
			<column name="recorded_invoice_id" type="BIGINT" />
			<column name="invoice_id" type="BIGINT" />
			<column name="credit_note_date" type="TIMESTAMP WITHOUT TIME ZONE"></column>
			<column name="due_date" type="TIMESTAMP WITHOUT TIME ZONE"></column>
			<column name="amount_without_tax" type="numeric(23, 12)" />
			<column name="amount_with_tax" type="numeric(23, 12)" />
			<column name="net_to_pay" type="numeric(23, 12)" />
		</createTable>

		<createSequence sequenceName="billing_credit_note_seq"
			startValue="1" />
		<addPrimaryKey columnNames="id" constraintName="billing_credit_note_pkey"
			tableName="billing_credit_note" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="creator_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_adm_user_creator"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<addForeignKeyConstraint baseColumnNames="updater_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_adm_user_updater"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
		<addForeignKeyConstraint baseColumnNames="billing_account_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_billing_account"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="billing_billing_account" />
		<addForeignKeyConstraint baseColumnNames="recorded_invoice_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_recorded_invoice"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="ar_account_operation" />
		<addForeignKeyConstraint baseColumnNames="invoice_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_invoice"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="billing_invoice" />

		<createTable tableName="billing_credit_note_tax_amt">
			<column name="creditnote_id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="taxamounts_key" type="VARCHAR(255)">
				<constraints nullable="false" />
			</column>
			<column name="taxamounts" type="numeric(23, 12)" />
		</createTable>

		<addPrimaryKey columnNames="creditnote_id, taxamounts_key"
			constraintName="billing_credit_note_tax_amt_pkey" tableName="billing_credit_note_tax_amt" />
		<addForeignKeyConstraint baseColumnNames="creditnote_id"
			baseTableName="billing_credit_note_tax_amt" constraintName="fk_billing_credit_note_tax_amt_credit_note"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="billing_credit_note" />

		<createTable tableName="billing_credit_note_line">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
			<column name="version" type="INT4" />
			<column name="provider_id" type="BIGINT" />
			<column name="description" type="VARCHAR(255)" />
			<column name="credit_note_id" type="BIGINT" />
			<column name="invoice_sub_category" type="BIGINT" />
			<column name="amount_without_tax" type="numeric(23, 12)" />
			<column name="tax_amount" type="numeric(23, 12)" />
			<column name="amount_with_tax" type="numeric(23, 12)" />
		</createTable>

		<createSequence sequenceName="billing_credit_note_line_seq"
			startValue="1" />
		<addPrimaryKey columnNames="id"
			constraintName="billing_credit_note_line_pkey" tableName="billing_credit_note_line" />
		<addForeignKeyConstraint baseColumnNames="provider_id"
			baseTableName="billing_credit_note_line" constraintName="fk_billing_credit_note_line_crm_provider"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
		<addForeignKeyConstraint baseColumnNames="credit_note_id"
			baseTableName="billing_credit_note_line" constraintName="fk_billing_credit_note_line_credit_note"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="billing_credit_note" />
		<addForeignKeyConstraint baseColumnNames="invoice_sub_category"
			baseTableName="billing_credit_note_line" constraintName="fk_billing_credit_note_line_invoice_sub_cat"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="billing_invoice_sub_cat" />
	</changeSet>

	<changeSet author="EdwardLegaspi" id="#1110_20151002">
		<addColumn tableName="billing_invoice">
			<column name="code" type="VARCHAR(60)" />
			<column name="description" type="VARCHAR(100)" />
		</addColumn>

		<sql>UPDATE billing_invoice SET code=concat('ocb_id_', id)</sql>

		<addNotNullConstraint columnDataType="VARCHAR(60)"
			columnName="code" tableName="billing_invoice" />
	</changeSet>

	<changeSet author="EdwardLegaspi" id="#1147_20151009">
		<addColumn tableName="crm_provider">
			<column name="credit_note_prefix" type="VARCHAR(255)" />
			<column name="current_credit_note_nb" type="BIGINT" />
		</addColumn>
		<addColumn tableName="crm_seller">
			<column name="credit_note_prefix" type="VARCHAR(255)" />
			<column name="current_credit_note_nb" type="BIGINT" />
		</addColumn>
	</changeSet>

	<changeSet id="#1105_20151009" author="EdwardLegaspi">
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_recorded_invoice" />
		<dropColumn tableName="billing_credit_note" columnName="recorded_invoice_id" />

		<addColumn tableName="billing_credit_note">
			<column name="recorded_credit_note_id" type="BIGINT" />
		</addColumn>
		<addForeignKeyConstraint baseColumnNames="recorded_credit_note_id"
			baseTableName="billing_credit_note" constraintName="fk_billing_credit_note_recorded_credit_note"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="ar_account_operation" />
	</changeSet>

	<changeSet id="#1138_20151009" author="EdwardLegaspi">
		<addColumn tableName="crm_provider">
			<column name="credit_note_sequence_size" type="INT4" />
		</addColumn>
		<addColumn tableName="crm_seller">
			<column name="credit_note_sequence_size" type="INT4" />
		</addColumn>

		<sql>UPDATE crm_provider SET credit_note_sequence_size=9;</sql>
	</changeSet>

	<changeSet author="anasseh" id="20151009_1149">
		<modifyDataType columnName="SELECTED_BILLING_ACCOUNTS"
			newDataType="text" tableName="BILLING_BILLING_RUN" />
	</changeSet>

	<changeSet author="anasseh" id="20151013_1165">
		<modifyDataType columnName="MESSAGE" newDataType="text"
			tableName="MEVEO_SCRIPT_INSTANCE_ERROR" />
	</changeSet>

	<changeSet id="#REVERT_CREDIT_NOTE_20151014" author="EdwardLegaspi">
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_crm_provider" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_adm_user_creator" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_adm_user_updater" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_billing_account" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_invoice" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note_tax_amt"
			constraintName="fk_billing_credit_note_tax_amt_credit_note" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note_line"
			constraintName="fk_billing_credit_note_line_crm_provider" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note_line"
			constraintName="fk_billing_credit_note_line_credit_note" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note_line"
			constraintName="fk_billing_credit_note_line_invoice_sub_cat" />
		<dropForeignKeyConstraint baseTableName="billing_credit_note"
			constraintName="fk_billing_credit_note_recorded_credit_note" />

		<dropPrimaryKey tableName="billing_credit_note"
			constraintName="billing_credit_note_pkey" />
		<dropPrimaryKey tableName="billing_credit_note_line"
			constraintName="billing_credit_note_line_pkey" />
		<dropPrimaryKey tableName="billing_credit_note_tax_amt"
			constraintName="billing_credit_note_tax_amt_pkey" />

		<dropSequence sequenceName="billing_credit_note_seq" />
		<dropSequence sequenceName="billing_credit_note_line_seq" />

		<dropColumn tableName="crm_provider" columnName="credit_note_prefix" />
		<dropColumn tableName="crm_provider" columnName="current_credit_note_nb" />
		<dropColumn tableName="crm_provider" columnName="credit_note_sequence_size" />

		<dropColumn tableName="crm_seller" columnName="credit_note_prefix" />
		<dropColumn tableName="crm_seller" columnName="current_credit_note_nb" />
		<dropColumn tableName="crm_seller" columnName="credit_note_sequence_size" />

		<dropColumn tableName="ar_account_operation" columnName="credit_note_date" />

		<dropTable tableName="billing_credit_note_tax_amt" />
		<dropTable tableName="billing_credit_note_line" />
		<dropTable tableName="billing_credit_note" />
	</changeSet>

	<changeSet id="#1167_20151015" author="EdwardLegaspi">
		<addColumn tableName="crm_provider">
			<column name="invoice_adjustment_prefix" type="VARCHAR(255)" />
			<column name="current_invoice_adjustment_nb" type="BIGINT" />
			<column name="invoice_adjustment_sequence_size" type="INT4" />
		</addColumn>
		<addColumn tableName="crm_seller">
			<column name="invoice_adjustment_prefix" type="VARCHAR(255)" />
			<column name="current_invoice_adjustment_nb" type="BIGINT" />
			<column name="invoice_adjustment_sequence_size" type="INT4" />
		</addColumn>

		<addColumn tableName="billing_invoice">
			<column name="detailed_invoice" type="boolean" defaultValue="true" />
			<column name="invoice_id" type="BIGINT" />
		</addColumn>

		<addForeignKeyConstraint constraintName="fk_billing_invoice_adjusted_invoice"
			referencedTableName="billing_invoice" baseColumnNames="invoice_id"
			baseTableName="billing_invoice" referencedColumnNames="id" />

		<sql>UPDATE billing_invoice SET invoice_type='COMMERCIAL'</sql>
	</changeSet>

	<changeSet id="#1170_20151020" author="EdwardLegaspi">
		<addColumn tableName="billing_invoice_configuration">
			<column name="display_detail" type="BOOL" defaultValueBoolean="true"></column>
		</addColumn>
	</changeSet>

	<changeSet id="#1184_20151022" author="EdwardLegaspi">
		<addColumn tableName="billing_rated_transaction">
			<column name="adjusted_rated_tx" type="BIGINT" />
		</addColumn>

		<addForeignKeyConstraint
			constraintName="fk_billing_rated_transaction_rated_transaction"
			referencedTableName="billing_rated_transaction" baseColumnNames="adjusted_rated_tx"
			baseTableName="billing_rated_transaction" referencedColumnNames="id" />		
	</changeSet>
	
	<changeSet id="#1134-20151026" author="Mbarek">
		<addColumn tableName="crm_provider"> 
			<column name="INVOICE_SEQUENCE_SIZE" type="INT4" defaultValue="9" />
		</addColumn>
		<addColumn tableName="crm_seller"> 
			<column name="INVOICE_SEQUENCE_SIZE" type="INT4" defaultValue="9" />
		</addColumn>
	</changeSet>

	<changeSet author="1187_20151102" id="Mbarek">
		<createTable tableName="adm_script_notification">
			<column name="id" type="BIGINT">
				<constraints nullable="false" />
			</column>
		</createTable>
		<addPrimaryKey columnNames="id"
			constraintName="adm_script_notification_pkey" tableName="adm_script_notification" />
		<addForeignKeyConstraint baseColumnNames="id"
			baseTableName="adm_script_notification" constraintName="fk_n1n2i3ht998wlegdshme8gyfd"
			deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
			onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_notification" />

		<!--migration notifications -->
		<sql splitStatements="false">
			create or replace function scriptNotification() returns void as
			$body$
			declare
			cursorNotif cursor for
			select * from adm_notification where id not in(
			SELECT id FROM adm_notif_webhooks
			UNION
			SELECT id FROM adm_notif_email
			UNION
			SELECT id FROM adm_notif_job
			UNION
			SELECT id FROM adm_notif_history
			);
			notifRecord record;
			begin
			open cursorNotif;
			loop
			fetch cursorNotif into notifRecord;
			exit when not found;
			insert into adm_script_notification(id) values(notifRecord.id);
			end loop;
			close cursorNotif;
			end;
			$body$
			language plpgsql volatile;
			<!--execute function -->
			select scriptNotification();
		</sql>
	</changeSet>
	
	<changeSet id="#1200-20151028" author="EdwardLegaspi">
		<dropColumn tableName="billing_invoice" columnName="code"/>
		<dropColumn tableName="billing_invoice" columnName="description"/>
	</changeSet>
	
	<changeSet id="1209_20151029" author="EdwardLegaspi">
		<sql>update BILLING_INVOICE_AGREGATE set DISCOUNT_AGGREGATE=false where DISCOUNT_AGGREGATE is null;</sql>
		<addDefaultValue columnName="discount_aggregate" tableName="billing_invoice_agregate" defaultValueBoolean="false" />
	</changeSet>
	
	<changeSet id="1201_20151102" author="EdwardLegaspi">
		<sql>ALTER TABLE crm_seller DROP CONSTRAINT IF EXISTS uk_rsylyj7p2u3xkey9tkiu9rn7d;</sql>
		<addUniqueConstraint columnNames="code, provider_id" constraintName="uk_rsylyj7p2u3xkey9tkiu9rn7d" deferrable="false" disabled="false" initiallyDeferred="false" tableName="crm_seller"/>
	</changeSet>

	<changeSet id="#1227_20151104" author="EdwardLegaspi"
		failOnError="false">
		<preConditions>
			<not>
				<columnExists tableName="BILLING_INVOICE_CONFIGURATION"
					columnName="display_provider" />
			</not>
		</preConditions>
		<addColumn tableName="BILLING_INVOICE_CONFIGURATION">
			<column name="display_provider" type="BOOL"
				defaultValueBoolean="false"></column>
		</addColumn>
	</changeSet>

	<changeSet id="#1231_20151104" author="EdwardLegaspi">
		<dropForeignKeyConstraint baseTableName="billing_invoice_agregate"
			constraintName="fkc92fa77a520f2e17" />
		<dropColumn tableName="billing_invoice_agregate"
			columnName="sub_cat_invoice_agregate_id" />
	</changeSet>
	
    <changeSet author="anasseh" id="#1221_20151109">
        <createSequence sequenceName="FTP_IMPORTED_FILE_SEQ" startValue="1" />
    </changeSet>
    
    <changeSet author="anasseh" id="#1221_20151109_1">
        <createTable tableName="FTP_IMPORTED_FILE">
            <column name="id" type="BIGINT">
                <constraints nullable="false" />
            </column>
            <column name="version" type="INT4" />
            <column name="disabled" type="BOOL">
                <constraints nullable="false" />
            </column>
            <column name="created" type="TIMESTAMP WITHOUT TIME ZONE">
                <constraints nullable="false" />
            </column>
            <column name="updated" type="TIMESTAMP WITHOUT TIME ZONE" />
            <column name="provider_id" type="BIGINT" />
            <column name="creator_id" type="BIGINT" />
            <column name="updater_id" type="BIGINT" />
			<column name="code" type="VARCHAR(60)">
				<constraints nullable="false" />
			</column>
			<column name="description" type="VARCHAR(100)" />
            <column name="URI" type="VARCHAR(2000)">
                <constraints nullable="false" />
            </column>
            <column name="SIZE" type="BIGINT"/>            
            <column name="IMPORT_DATE" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="LAST_MODIFICATION" type="TIMESTAMP WITHOUT TIME ZONE"/>

        </createTable>
        <addPrimaryKey columnNames="id" constraintName="Ftp_Imported_File_pkey"
            tableName="FTP_IMPORTED_FILE" />
        <addForeignKeyConstraint baseColumnNames="provider_id"
            baseTableName="FTP_IMPORTED_FILE" constraintName="fk_Ftp_Imported_File_crm_provider"
            deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
            onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="crm_provider" />
        <addForeignKeyConstraint baseColumnNames="creator_id"
            baseTableName="FTP_IMPORTED_FILE" constraintName="fk_creator_Ftp_Imported_File_adm_user"
            deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
            onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />

        <addForeignKeyConstraint baseColumnNames="updater_id"
            baseTableName="FTP_IMPORTED_FILE" constraintName="fk_updater_Ftp_Imported_File_adm_user"
            deferrable="false" initiallyDeferred="false" onDelete="NO ACTION"
            onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="adm_user" />
    </changeSet>	

</databaseChangeLog>
